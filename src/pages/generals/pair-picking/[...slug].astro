---
export const prerender = false;

import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import type { CollectionEntry } from 'astro:content';
import { getEntry } from "astro:content";

const DEBUG = false;

let { slug } = Astro.params;
if (slug === undefined) {
  console.log(`slug was undefined`)
  console.log(JSON.stringify(Astro.params))
  slug = 'generals/pair-picking'
}
console.log(`slug is ${slug}`)
let entry: CollectionEntry<'docs'> | undefined = undefined;

if(!slug.localeCompare('generals/pair-picking')) {
  entry = await getEntry('docs', 'generals/pair-picking')
 } else {
  entry = await getEntry("docs", `generals/pair-picking/${slug}`);
 }

if (entry === undefined) {
  console.log(`${slug} was not found`)
  return Astro.redirect("/404");
}

const { Content } = await entry.render(); 
---

<StarlightPage frontmatter={{
  title: entry.data.title,
  lastUpdated: entry.data.lastUpdated,
  tableOfContents: entry.data.tableOfContents,
  }}>
  {DEBUG && `Dynamic Template`}
  <Content />
  
</StarlightPage>

